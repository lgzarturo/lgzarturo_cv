---
// src/layouts/BaseLayout.astro
import "../styles/global.css";

const GTM_ID = import.meta.env.VITE_GTM_ID;

---
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arturo L√≥pez G√≥mez - L√≠der T√©cnico | Java & Spring Boot</title>
    <meta name="description" content="L√≠der T√©cnico con 15+ a√±os en Java, Spring Boot, microservicios y Next.js. Especialista en arquitectura web, automatizaci√≥n y formaci√≥n de equipos. Disponible para nuevos retos.">
    <meta name="keywords" content="L√≠der T√©cnico, Java, Spring Boot, Microservicios, Next.js, Arquitectura de Software, DevOps, CI/CD, AWS, Docker, Kubernetes, Python, TailwindCSS, Hugo, Astro, Mandrill, Mailchimp, Git, ATS, Reclutamiento, Turismo, Hoteler√≠a">
    <meta name="author" content="Arturo L√≥pez G√≥mez">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Arturo L√≥pez G√≥mez - L√≠der T√©cnico | Java & Spring Boot">
    <meta property="og:description" content="Perfil profesional de Arturo L√≥pez G√≥mez, experto en Java, Spring Boot y proyectos web. Listo para colaborar.">
    <meta property="og:image" content="https://lgzarturo.com/og-image.jpg">
    <meta property="og:url" content="https://lgzarturo.com">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Arturo L√≥pez G√≥mez - L√≠der T√©cnico">
    <meta name="twitter:description" content="Experto en Java, Spring Boot y arquitectura de microservicios. Disponible para oportunidades.">
    <meta name="twitter:image" content="https://lgzarturo.com/twitter-image.jpg">
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Arturo L√≥pez G√≥mez",
        "jobTitle": "L√≠der T√©cnico",
        "description": "L√≠der T√©cnico con experiencia en Java, Spring Boot, microservicios y Next.js. Especialista en arquitectura web y formaci√≥n de equipos.",
        "url": "https://lgzarturo.com",
        "sameAs": ["https://www.linkedin.com/in/lgzarturo"],
        "address": {
            "@type": "PostalAddress",
            "addressLocality": "Canc√∫n",
            "addressRegion": "Quintana Roo",
            "addressCountry": "M√©xico"
        },
        "contactPoint": {
            "@type": "ContactPoint",
            "telephone": "+52-998-222-9740",
            "email": "lgzarturo@gmail.com"
        },
        "knowsAbout": ["Java", "Spring Boot", "Microservicios", "Next.js", "React", "TypeScript", "Python", "Docker", "AWS", "CI/CD", "DevOps", "Arquitectura de Software"]
    }
    </script>    
    <script is:inline>
        // Aplica el tema oscuro si el usuario lo prefiere
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Tailwind se importa desde src/styles/global.css -->
    {GTM_ID && (
      <!-- Google Tag Manager -->
      <script is:inline define:vars={{ gtmId: GTM_ID }}>
          (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
          new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
          'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
          })(window,document,'script','dataLayer', gtmId);
      </script><!-- End Google Tag Manager -->
    )}
</head>
<body>
    {GTM_ID && (
      <!-- Google Tag Manager (noscript) -->
      <noscript><iframe src={`https://www.googletagmanager.com/ns.html?id=${GTM_ID}`}
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
      <!-- End Google Tag Manager (noscript) -->
    )}
    <slot />
    <script src="/script.js" is:inline></script>
    <script is:inline>
        // Script para alternar el tema
        function updateThemeToggleText() {
            const themeToggleText = document.getElementsByClassName('theme-toggle-text');
            const isDark = document.documentElement.classList.contains('dark');
            for (let i = 0; i < themeToggleText.length; i++) {
                themeToggleText[i].textContent = isDark ? '‚òÄÔ∏è Modo claro' : 'üåô Modo oscuro';
            }
        }
        function setTheme(theme) {
            // Cambia el tema y actualiza el almacenamiento local
            if (theme === 'dark') {
                document.documentElement.classList.add('dark');
                localStorage.theme = 'dark';
            } else {
                document.documentElement.classList.remove('dark');
                localStorage.theme = 'light';
            }
            updateThemeToggleText();
        }
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializa el tema seg√∫n preferencia
            if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                setTheme('dark');
            } else {
                setTheme('light');
            }
            // A√±ade el evento a todos los botones
            const themeToggle = document.getElementsByClassName('theme-toggle');
            for (let i = 0; i < themeToggle.length; i++) {
                themeToggle[i].addEventListener('click', () => {
                    const isDark = document.documentElement.classList.contains('dark');
                    setTheme(isDark ? 'light' : 'dark');
                });
            }
        });
    </script>
</body>
</html>